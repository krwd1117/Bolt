<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bolt Authentication</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #121212;
            color: #ffffff;
        }

        .container {
            text-align: center;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #FFD700;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <script>
        window.onload = function () {
            // Get query parameters from the current URL (e.g., ?code=...&state=...)
            const queryString = window.location.search;

            // Construct the deep link URL with the same parameters
            // We use 'bolt://bolt/callback' where 'bolt' is the host and '/callback' is the path.
            // This ensures Flutter's GoRouter sees '/callback' as the path.
            // (bolt://callback/ might be interpreted as path '/' with host 'callback')
            const deepLink = "bolt://bolt/callback" + queryString;

            // Attempt to open the app
            window.location.href = deepLink;

            // Optional: fallback for when app isn't installed or fails to open
            setTimeout(function () {
                document.getElementById('message').innerText = "If the app doesn't open via bolt://, click here to try manually.";

                // Create a manual link
                const link = document.createElement('a');
                link.href = deepLink;
                link.innerText = "Open App";
                link.style.color = "#FFD700";
                link.style.display = "block";
                link.style.marginTop = "20px";
                document.getElementById('container').appendChild(link);
            }, 2000);
        };
    </script>
</head>

<body>
    <div class="container" id="container">
        <div class="spinner"></div>
        <div id="message">Authenticating...</div>
    </div>
</body>

</html>